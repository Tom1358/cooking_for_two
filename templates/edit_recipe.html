{% extends "base.html" %}
{% block content %}

<div class="full-background-image">

    <div class="card register-card col-6 offset-3">
        <div class="card-body">
            <h2 class="card-title text-white">Edit Recipe</h2></br>
            <h4 class="card-subtitle mb-2 text-white">Fill in the following details</h4></br>
            <form method="POST" action="{{ url_for('edit_recipe', recipe_id=recipe._id) }}">

                <!-- Region for user to input -->
                <div class="input-group form-group">

                    <label for="region" class="recipe-label text-white">Region</label>

                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-globe-americas"></i></span>
                    </div>

                    <div class="form-group full-width">
                        <select class="form-control" id="region" name="region">
                            <option disabled>Region</option>

                                {% for category in categories %}
                                    {% if category.region == recipe.region %}
                                        <option value="{{ category.region  }}" selected>{{ category.region }}</option>
                                    {% else %}
                                        <option value="{{ category.region  }}">{{ category.region }}</option>
                                    {% endif %}
                                {% endfor %}
                        </select>
                    </div>

                </div></br>

                <!-- Dish Name for user to input -->
                <div class="input-group form-group">

                    <label for="dish_name" class="recipe-label text-white">Dish Name</label>

                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-utensils"></i></span>
                    </div>

                    <input id="dish_name" name="dish_name" value="{{ recipe.dish_name }}" type="text" class="form-control validate" minlength="5"
                        maxlength="55" placeholder="Fried Eggs" required>

                </div></br>

                <!-- Ingredients for user to input -->
                <div class="input-group form-group">

                    <label for="ingredients" class="recipe-label text-white">Ingredients</label>

                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-utensil-spoon"></i></span>
                    </div>

                    <input id="ingredients" name="ingredients" value="{{ recipe.ingredients }}" type="text" class="form-control validate" minlength="5"
                        maxlength="55" placeholder="Eggs" required>
                    
                    <!-- plus and minus buttons -->
                    <div class="input-group-prepend">
                        <span class="input-group-text"><a id="add_row"><i class="fas fa-plus"></i></a></span>
                    </div>
                    <div class="input-group-prepend">
                        <span class="input-group-text"><a id="add_row"><i class="fas fa-minus"></i></a></span>
                    </div>

                </div></br>

                <!-- Equipment for user to input -->
                <div class="input-group form-group">

                    <label for="equipment" class="recipe-label text-white">Equipment</label>

                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-mortar-pestle"></i></span>
                    </div>

                    <input id="equipment" name="equipment" value="{{ recipe.equipment }}"type="text" class="form-control validate" minlength="5"
                        maxlength="35" placeholder="Frying Pan" required>

                </div></br>

                <!-- Recipe for user to input -->
                <div class="input-group form-group">

                    <label for="recipe" class="recipe-label text-white">Recipe</label>

                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-mortar-pestle"></i></span>
                    </div>

                    <input id="recipe" name="recipe" value="{{ recipe.recipe }}"type="text" class="form-control validate" minlength="5"
                        maxlength="200" placeholder="recipe here" required>

                </div></br>

                <!-- Description for user to input -->
                <div class="input-group form-group">

                    <label for="description" class="recipe-label text-white">Description</label>

                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fab fa-gripfire"></i></span>
                    </div>

                    <input id="description" name="description" value="{{ recipe.description }}" type="text" class="form-control validate" minlength="5"
                        maxlength="35" placeholder="The classic breakfast to help you wake up" required>

                </div></br>

                <!-- Image for user to input -->
                <div class="input-group form-group">

                    <label for="image" class="recipe-label text-white">URL for image</label>

                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-image"></i></span>
                    </div>

                    <input id="image" name="image" value="{{ recipe.image }}" type="url" class="form-control validate" minlength="5"
                        placeholder="url for image">

                </div></br>

                <!-- Complete Button -->
                <div class="form-group">
                    <button type="submit" id="submit"
                        class="btn pastel-red btn-lg px-4 me-sm-2 active-button:active active-button:hover">Update</button>
                    <a href="#delete-modal" data-toggle="modal"
                    class="btn pastel-blue btn-lg px-4 me-sm-3 active-button text-white">Delete</a>
                </div></br>

                <!-- Modal to delete recipe -->
                <div class="modal fade" id="delete-modal" tabindex="-1" role="dialog"
                    aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="delete-modal">Delete Recipe</h5>
                                <span aria-hidden="true"></span>
                            </div>
                            <div class="modal-body">
                                Are you sure you want to delete this recipe?
                            </div>
                            <div class="modal-footer">
                                <a class="btn pastel-blue text-white" data-dismiss="modal">Cancel</a>
                                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}"
                                    class="btn pastel-red">Delete</a>
                            </div>
                        </div>
                    </div>
                </div>

            </form>

            <div class="card-footer">
                <div class="d-flex justify-content-center links text-white">
                    <a href="{{ url_for('profile', username=session['user'])}}" class="text-pastel-yellow">Cancel</a>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock %}